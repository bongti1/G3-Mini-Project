<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emma Smith - Profile</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="/dist/css/profile.css">
    <style>
      /* Back button: compact, pill-shaped with icon, hover/focus/active states */
      .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.45rem 0.9rem;
        background: linear-gradient(90deg, #4f8af6 0%, #71d1ff 100%);
        color: #fff !important;
        border-radius: 999px;
        text-decoration: none;
        box-shadow: 0 6px 18px rgba(79, 138, 246, 0.22);
        font-weight: 600;
        font-size: 0.95rem;
        transition: transform 160ms ease, box-shadow 160ms ease, opacity 160ms;
        -webkit-tap-highlight-color: transparent;
      }
      .back-btn i {
        font-size: 1.15rem;
        line-height: 1;
      }
      .back-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 28px rgba(79, 138, 246, 0.22);
        opacity: 0.98;
      }
      .back-btn:active {
        transform: translateY(0);
        box-shadow: 0 6px 18px rgba(79, 138, 246, 0.18);
      }
      .back-btn:focus {
        outline: 3px solid rgba(113, 209, 255, 0.18);
        outline-offset: 3px;
      }
      /* small screens: slightly smaller padding */
      @media (max-width: 420px) {
        .back-btn { padding: 0.35rem 0.7rem; font-size: 0.9rem; }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="profile-card">
        <!-- Cover Section with Gradient -->
        <div class="cover-section">
          <a
            class="back-btn m-2"
            href="/dist/index.html"
            title="Back"
            aria-label="Go back"
          >
            <i class="bi bi-arrow-left-short" aria-hidden="true"></i>
            <span>Back</span>
          </a>
        </div>

        <!-- Profile Image with Edit Button -->
        <div class="profile-image-container">
          <div class="profile-image">
            <img id="avatar" src="" alt="" />
          </div>
          <div
            class="edit-profile-icon"
            id="editProfileImageBtn"
            title="Edit Profile Image"
          >
            <i class="bi bi-pencil"></i>
          </div>
        </div>

        <!-- Profile Information -->
        <div class="profile-info">
          <h1 id="name" class="profile-name"></h1>
          <p id="email" class="profile-title"></p>
          <!-- Action Buttons -->
          <div class="profile-actions">
            <button class="btn btn-edit-profile" id="editProfileBtn">
              Edit Profile
            </button>
            <button class="btn btn-settings" id="settingsBtn">Settings</button>
            <button class="btn btn-logout" onclick="logout()" id="logoutBtn">Logout</button>
          </div>

          <!-- Action Cards -->
          <div class="action-cards">
            <div class="action-card">
              <div class="action-card-icon">
                <i class="bi bi-check-circle"></i>
              </div>
              <h3 class="action-card-title">Post Article</h3>
              <p id="postArticle" class="action-card-description"></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Profile Image Modal -->
    <div class="modal-backdrop" id="editImageBackdrop"></div>
    <div class="modal-dialog-custom" id="editImageModal">
      <div class="modal-content-custom">
        <div class="modal-header-custom">
          <h2 class="modal-title-custom">Edit Profile Image</h2>
        </div>
        <div class="modal-body-custom">
          <div class="form-group-custom">
            <label for="profileImageInput">Choose Profile Image</label>
            <div class="file-input-wrapper">
              <input
                type="file"
                id="profileImageInput"
                class="form-control-custom file-input-custom"
                accept="image/*"
                onchange="clearAva()"
              />
            </div>
          </div>
          <span style="color: red; font-size: smaller;" id="imageWarn" ></span>
        </div>
        <div class="modal-footer-custom">
          <button class="btn-modal-cancel" id="cancelEditImageBtn" onclick="clearData()">
            Cancel
          </button>
          <button
            class="btn-modal-save"
            onclick="changeAvatar()"
            id="saveEditImageBtn"
          >
            Save
          </button>
        </div>
      </div>
    </div>
    
    <!-- Edit Profile Modal -->
    <div class="modal-backdrop" id="editProfileBackdrop"></div>
    <div class="modal-dialog-custom" id="editProfileModal">
      <div class="modal-content-custom">
        <div class="modal-header-custom">
          <h2 class="modal-title-custom">Edit Profile</h2>
        </div>
        <div class="modal-body-custom">
          <div class="form-group-custom">
            <div class="form-row-custom">
              <div>
                <label for="firstNameInput">First Name</label>
                <input
                  type="text"
                  id="firstNameInput"
                  class="form-control-custom"
                  onkeydown="clearText()"
                />
              </div>
              <div>
                <label for="lastNameInput">Last Name</label>
                <input
                  type="text"
                  id="lastNameInput"
                  class="form-control-custom"
                  onkeydown="clearText()"
                />
              </div>
              <span style="color: red; font-size: smaller;" id="warningText" ></span>
            </div>
          </div>
        </div>
        <div class="modal-footer-custom">
          <button class="btn-modal-cancel" id="cancelEditProfileBtn" onclick="clearData()">
            Cancel
          </button>
          <button
            class="btn-modal-save"
            onclick="saveEditProfileBtn()"
            id="saveEditProfileBtn"
          >
            Save
          </button>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-backdrop" id="settingsBackdrop"></div>
    <div class="modal-dialog-custom" id="settingsModal">
      <div class="modal-content-custom">
        <div class="modal-header-custom">
          <h2 class="modal-title-custom">Settings</h2>
        </div>
        <div class="modal-body-custom">
          <div class="form-group-custom">
            <label for="settingsGmailInput">Gmail</label>
            <input
              type="email"
              id="settingsGmailInput"
              class="form-control-custom"
              onkeydown="clearText()"
            />
            <span
              id="wrongEmail"
              style="color: red; font-size: smaller; margin-left: 10px"
            ></span>
          </div>
        </div>
        <div class="modal-footer-custom">
          <button class="btn-modal-cancel" id="cancelSettingsBtn" onclick="clearData()">
            Cancel
          </button>
          <button
            class="btn-modal-save"
            onclick="settingBtn()"
            id="saveSettingsBtn"
          >
            Save
          </button>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/dist/js/profile.js" ></script>
    <script>
      // Modal functions
      function openModal(modalId, backdropId) {
        const modal = document.getElementById(modalId);
        const backdrop = document.getElementById(backdropId);

        // Show elements first
        backdrop.style.display = "block";
        modal.style.display = "block";

        // Trigger animation on next frame for smooth transition
        requestAnimationFrame(() => {
          backdrop.classList.add("show");
          modal.classList.add("show");
        });

        document.body.style.overflow = "hidden";
      }

      function closeModal(modalId, backdropId) {
        const modal = document.getElementById(modalId);
        const backdrop = document.getElementById(backdropId);

        // Remove show class to trigger fade-out animation
        modal.classList.remove("show");
        backdrop.classList.remove("show");

        // Hide elements after animation completes
        setTimeout(() => {
          modal.style.display = "none";
          backdrop.style.display = "none";
        }, 400); // Match transition duration

        document.body.style.overflow = "";
      }

      // Edit Profile Image Modal
      document
        .getElementById("editProfileImageBtn")
        .addEventListener("click", function () {
          openModal("editImageModal", "editImageBackdrop");
        });


        document
        .getElementById("cancelEditImageBtn")
        .addEventListener("click", function () {
          closeModal("editImageModal", "editImageBackdrop");
        });

      // Edit Profile Modal
      document
        .getElementById("editProfileBtn")
        .addEventListener("click", function () {
          openModal("editProfileModal", "editProfileBackdrop");
        });
        document
        .getElementById("cancelEditProfileBtn")  
        .addEventListener("click", function () {
          closeModal("editProfileModal", "editProfileBackdrop");
        });
      // Settings Modal
      document
        .getElementById("settingsBtn")
        .addEventListener("click", function () {
          openModal("settingsModal", "settingsBackdrop");
        });

      document
        .getElementById("cancelSettingsBtn")
        .addEventListener("click", function () {
          closeModal("settingsModal", "settingsBackdrop");
        });
    </script>
  </body>
</html>
